(function(t){function e(e){for(var a,r,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},n={app:0},i=[];function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"185b":function(t,e,s){},2104:function(t,e,s){},4444:function(t,e,s){"use strict";s("57f3")},4678:function(t,e,s){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return s(e)}function i(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=i,t.exports=n,n.id="4678"},"4fff":function(t,e,s){},"52d7":function(t,e,s){"use strict";s("7d1c")},5403:function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),n=s("1dce"),i=s.n(n),r=s("6612"),o=s.n(r),l=s("2f62"),c=s("0e75"),d={import_to:"1. Import to...",asset:"Asset",select_institution:"2. Select institution and account to import to ...",select_asset:"2. Select asset to import to ...",upload_csv:"3. Upload the CSV transactions file you would like to import...",identify_columns:"4. Identify columns to import ...",account_currency:"Account currency ...",selected_currency:"Selected account currenty is",transactions_imported_as:"all transactions amount will be importes as",detected_as:"Detected as...",imported_as:"Import as...",review_data:"5. Review data that will be imported ...",import:"Import",full_file:"Full File",selected_columns:"Selected Columns",guidelines_heading:"Guidelines",guidelines_text:"Make sure you map at least the mandatory columns to initiate the process. Date, Type and Amount are required. You can pick multiple fields as Description and the data will be joined into the description fields.",mandatory_heading:"Mandatory",mandatory:"Date: Is the transaction date. <br>  Type: Is the transaction type which can be one of deposit, withdrawal, transfer, switch, interest, dividend, distribution, roc, reinvest, tax, fee, sell, buy, income, mtm or unknown. <br>  Amount: Is the total value of the transaction net of fees. <br> Symbol: The stock symbol, required for roc, reinvest, sell and buy.",optional_heading:"Optional",optional:"Description: The description of the transaction. <br> Fee: The commission or transaction fee. <br> Quantity: Usually the number of stocks bought or sold. <br>  Settlement Date: The date the transaction was settled. <br> Category: Usually used to categorize an expense.",ignored_heading:"Ignored",ignored_text:"The data from columns marked as Ignored won’t be imported unless you map the data with one of the mandatory or optional fields. If you would like those specific columns to be imported you can add the data to the Description field.",type_unknown_heading:"Type > Unknown",type_unknown_text:"Transactions of type unknown will be imported into Wealtica. Unknown type must be used when the transaction can’t be mapped to the available Wealthica transaction types.",csv_format_heading:"CSV Format",csv_support_upload:"we support to upload",csv_delimiter:"(delimiter, quote character, etc.)",institution:"Institution",failed_trans:"Failed Transactions",saving_trans:"Saving your transactions! Please wait!",error_happened_notified:"Error happened notified",we_apologize:"We apologize",close:"Close",failed_transactions_message:"Failed Transactions",go_to_saved_transactions:"Got To Saved Transactions",select_columns_from_above:"Select Columns from above section.",select_asset_to_import_to:"Select an asset to import to.",date:"Date *",amount:"Amount *",depsit_amount:"Deposit Amount *",withdraw_amount:"Withdrawal Amount *",type:"Type *",category:"Category",description:"Description *",fee:"Fee",investment:"Investment",note:"Note",quantity:"Quantity",gain:"Gain",security:"Security",settlement_date:"Settlement Date",symbol:"Symbol",ignored:"Ignored",error_mandatory_amount:"Either Amount or Deposit Amount , Withdrawal Amount is mandatory",error_you_choose:"You can choose either Type, Amount or Depoist Amount,Withdrawal Amount",error_if_you_choose_amount:"If you choose Amount then Type is required to select.",error_make_sure_amount:"Please make sure you fill all mandatory fields Amount, Date, Type, Description are required.",error_make_sure_deposit_amount:"Please make sure you fill all mandatory fields Deposit Amount or Withdrawal Amount, Date, Description are required."},u={import_to:"1. Importer vers...",asset:"Actif",select_institution:"2. Sélectionnez l'institution et le compte vers lesquels importer...",select_asset:"2. Sélectionnez l'actif à importer vers ...",upload_csv:"3. Téléchargez le fichier de transactions CSV que vous souhaitez importer...",identify_columns:"4. Identifiez les colonnes à importer...",account_currency:"Devise du compte...",selected_currency:"Le compte sélectionné est actuellement",transactions_imported_as:"le montant de toutes les transactions sera importé comme",detected_as:"Detected as...",imported_as:"Importer en tant que...",review_data:"5. Passez en revue les données qui seront importées...",import:"Importer",full_file:"Fichier complet",selected_columns:"Colonnes sélectionnées",guidelines_heading:"Des lignes directrices",guidelines_text:"Assurez-vous de mapper au moins les colonnes obligatoires pour lancer le processus. La date, le type et le montant sont requis. Vous pouvez choisir plusieurs champs comme description et les données seront jointes dans les champs de description.",mandatory_heading:"Obligatoire",mandatory:"Date : est la date de la transaction. <br>  Type : est le type de transaction qui peut être un dépôt, un retrait, un transfert, un échange, un intérêt, un dividende, une distribution, un roc, un réinvestissement, une taxe, des frais, une vente, un achat, un revenu, un mtm ou inconnu. <br> Montant : C'est la valeur totale de la transaction nette de frais. <br> Symbole : Le symbole boursier, requis pour roc, réinvestir, vendre et acheter.",optional_heading:"Optionnelle",optional:"Description : La description de la transaction. <br> Frais : La commission ou les frais de transaction.  <br> Quantité : Généralement le nombre d'actions achetées ou vendues.  <br> Date de règlement : La date à laquelle la transaction a été réglée. <br> Catégorie : Généralement utilisé pour catégoriser une dépense.",ignored_heading:"Ignorée",ignored_text:"Les données des colonnes marquées comme Ignorées ne seront pas importées, sauf si vous mappez les données avec l'un des champs obligatoires ou facultatifs. Si vous souhaitez que ces colonnes spécifiques soient importées, vous pouvez ajouter les données dans le champ Description.",type_unknown_heading:"Type > Inconnu",type_unknown_text:"Les transactions de type inconnu seront importées dans Wealtica. Un type inconnu doit être utilisé lorsque la transaction ne peut pas être mappée aux types de transaction Wealthica disponibles.",csv_format_heading:"Format CSV",csv_support_upload:"nous prenons en charge le téléchargement",csv_delimiter:"(délimiteur, guillemet, etc.)",institution:"Institution",failed_trans:"Échec des transactions",saving_trans:"Sauvegardez vos opérations ! S'il vous plaît, attendez!",error_happened_notified:"L'erreur s'est produite notifiée",we_apologize:"Nous nous excusons",close:"Proche",failed_transactions_message:"Échec des transactions",go_to_saved_transactions:"Accéder aux transactions enregistrées",select_columns_from_above:"Sélectionnez Colonnes dans la section ci-dessus.",select_asset_to_import_to:"Sélectionnez un actif vers lequel importer.",date:"Date *",amount:"Montante *",depsit_amount:"Montant du dépôt *",withdraw_amount:"Montant de retrait *",type:"Taper *",category:"Catégorie",description:"La description *",fee:"Frais",investment:"Investissement",note:"Noter",quantity:"Quantité",gain:"Gagner",security:"Sécurité",settlement_date:"Date de règlement",symbol:"symbole",ignored:"Ignorée",error_mandatory_amount:"Soit le montant, soit le montant du dépôt, le montant du retrait est obligatoire",error_you_choose:"Vous pouvez choisir le type, le montant ou le montant du dépôt, le montant du retrait",error_if_you_choose_amount:"Si vous choisissez Montant, le Type doit être sélectionné.",error_make_sure_amount:"Veuillez vous assurer de remplir tous les champs obligatoires Montant, Date, Type, Description sont requis.",error_make_sure_deposit_amount:"Veuillez vous assurer de remplir tous les champs obligatoires Montant du dépôt ou Montant du retrait, Date, Description sont requis."},p={en:d,fr:u},m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticClass:"app",style:t.appStyle},[t.loading?s("v-card",{staticClass:"text-center mx-4 mt-4 py-4"},[s("Loading"),s("p",{staticClass:"mb-0 grey--text"},[t._v(t._s(t.$t("loading")))])],1):s("div",{staticClass:"mx-2 grey--text text--darken-3 mb-5"},[s("upload-form")],1)],1)},h=[],_=s("982c"),f=s.n(_),v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.errorPopupVisible?s("error-popup",{attrs:{error:t.error}}):t._e(),t.erorPopupRedirectVisible?s("error-redirect-popup",{attrs:{"failed-transactions":t.failedTransactions,"redirect-u-r-l":t.redirectURL,"show-go-to-saved-transactions":t.showGoToSavedTransactions}}):t._e(),s("form",{attrs:{enctype:"multipart/form-data"}},[s("select-type",{on:{updateImportTo:t.updateImportTo}}),s("v-row",[s("v-col",{attrs:{cols:"24",sm:"12"}},[s("div",{staticClass:"row-heading"},["institution"===t.importTo?[t._v(" "+t._s(t.$t("select_institution"))+" ")]:[t._v(" "+t._s(t.$t("select_asset"))+" ")]],2)]),s("v-col",{staticClass:"select-institution-sec",attrs:{cols:"24",sm:"12"}},["institution"===t.importTo?s("select-institution",{ref:"selectInstitution",on:{updateInstitutionId:t.updateInstitutionId,updateInvestmentId:t.updateInvestmentId}}):t._e(),"asset"===t.importTo?s("select-asset",{ref:"selectAsset",on:{updateAssetId:t.updateAssetId}}):t._e()],1)],1),s("upload",{attrs:{"header-detected":t.headerDetected},on:{handleFileUpload:t.handleFileUpload}}),s("v-row",[s("v-col",{attrs:{cols:"24",sm:"12"}},[s("div",{staticClass:"row-heading"},[t._v(t._s(t.$t("identify_columns")))])]),s("v-col",{attrs:{cols:"24",sm:"12"}},[s("div",{staticClass:"account-currency"},[t._v(t._s(t.$t("account_currency")))]),t._v(" "+t._s(t.$t("selected_currency"))+" "),s("span",{staticClass:"selected-currency"},[t._v(t._s(t.selectedCurrency._id))]),t._v(" "+t._s(t.$t("transactions_imported_as"))+" "),s("span",{staticClass:"selected-currency"},[t._v(t._s(t.selectedCurrency._id))])]),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("select-data-type",{ref:"selectDataType",attrs:{"headers-with-data-type":t.headersWithDataType},on:{changeDataType:t.changeDataType}})],1),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("guidelines")],1)],1),t.headersWithDataType.length?s("v-row",[s("v-col",{attrs:{cols:"24",sm:"12"}},[s("div",{staticClass:"row-heading"},[t._v(" "+t._s(t.$t("review_data"))+" ")])]),s("v-col",{attrs:{cols:"24",sm:"12",align:"center",justify:"center"}},[s("v-btn",{attrs:{depressed:"",color:"primary"},on:{click:t.uploadCSV}},[t._v(t._s(t.$t("import")))])],1),s("v-col",{attrs:{cols:"24",sm:"12"}},[s("data-table",{attrs:{"original-data-arr":t.originalDataArr,"accepted-headers":t.acceptedHeaders,"selected-transaction-columns":t.selectedTransactionColumns}})],1)],1):t._e()],1),s("div",{staticClass:"text-center"},[s("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[t._v(" Saving your transactions! Please wait! "),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)],1)},y=[],b=s("b5ae"),g=s("c1df"),w=s.n(g);const T=/,(?=(?:[^"]*"[^"]*")*[^"]*$)/g,j=/((\d){1,3})+([,][\d]{3})*([.](\d)*)?/g,I=t=>"Invalid Date"!==new Date(t)&&!Number.isNaN(new Date(t)),C=t=>"string"===typeof t&&(!Number.isNaN(t)&&!Number.isNaN(parseFloat(t))),$=t=>"string"===typeof t,S=(t,e)=>{const s=e.split(T),a={};return t.forEach((t,e)=>{a[t]=s[e]}),a},D=t=>{const e=t.split(T),s=e.filter(t=>"string"!==typeof t);if(s.length)return!1;const a=e.filter(t=>Number.isNaN(Number(t))&&"Invalid Date"!==new Date(t)&&!Number.isNaN(Number(new Date(t)))&&w()(new Date(t)).isValid());return!a.length},k=(t,e)=>{const s=t.filter(t=>"ignored"!==t.dataType).map(t=>t.header);return!s.includes(e)},x=t=>{const e=t;if(!e)return null;const s=e.match(j);if(!s||!s.length)return null;const[a]=s;return a.replace(/,/g,"")},A=(t,e)=>{const s=e;switch(t){case"currency_amount":return x(s);case"deposit_amount":return x(s);case"withdrawal_amount":return x(s);case"date":return w()(s).format("YYYY-MM-DDTHH:mm:ss");case"type":return s.toLowerCase();default:return s}},O=(t,e)=>{switch(e){case"date-time":return I(t);case"number":return C(t);case"string":return $(t);default:return!1}},E=t=>{const e=t.reduce((t,e)=>w()(e.date).diff(w()(t.date))>=0?t:e);return w()(e.date).format("YYYY-MM-DD")},P=t=>{const e=t.reduce((t,e)=>w()(e.date).diff(w()(t.date))>=0?e:t);return w()(e.date).format("YYYY-MM-DD")},R=(t,e,s)=>{let a=t.split("\n");a=a.filter(t=>t&&"\n"!==t&&"\r"!==t&&"\r\n"!==t);const n=a[0],i=e||s?!!s:D(n);let r="";if(!i){const t=n.split(T);t.forEach((e,s)=>{r=`${r}Col${s+1}${s===t.length-1?"":","}`})}return{lines:a,headerDetected:i,header:r,firstRow:n}},z=(t,e,s)=>{const a=R(t,e,s),{headerDetected:n,header:i}=a;let{lines:r}=a;n||(r=[i,...r]);const o=r.map(t=>t.split(T));return{originalDataArr:o,headerDetected:n}},N=(t,e,s)=>{const a=R(t,e,s),{lines:n,headerDetected:i,firstRow:r}=a;let{header:o}=a;return i?(n.shift(),o=r.split(T)):o=o.split(","),n.map(t=>S(o,t))},L=async t=>new Promise((e,s)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>e(atob(a.result.split(",")[1])),a.onerror=t=>s(t)});var q=s("ff97");const H=(t,e)=>{const s=q["dataTypes"].filter(s=>s.matching_words.some(e=>t.toLowerCase()===e.toLowerCase())&&O(e,s.type)),[a]=s;return{header:t,dataType:a?a.name:"ignored"}},U=(t,e,s)=>{const a=t.filter(t=>t.header===e);return{dataType:a[0].dataType,newValue:A(a[0].dataType,s)}};var V=(t,e)=>{const s=t.filter(t=>"date"===t.dataType||"description"===t.dataType),a=t.filter(t=>"currency_amount"===t.dataType),n=t.filter(t=>"deposit_amount"===t.dataType||"withdrawal_amount"===t.dataType),i=t.filter(t=>"type"===t.dataType);return a.length||n.length?a.length&&n.length?{valid:!1,message:e("error_you_choose")}:a.length&&!i.length?{valid:!1,message:e("error_if_you_choose_amount")}:a.length&&i.length&&s.length<2?{valid:!1,message:e("error_make_sure_amount")}:n.length>0&&s.length<2?{valid:!1,message:e("error_make_sure_deposit_amount")}:{valid:!0,message:null}:{valid:!1,message:e("error_mandatory_amount")}},F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"guidelines"},[s("label",{staticClass:"as"},[t._v(t._s(t.$t("guidelines_heading")))]),s("div",[t._v(" "+t._s(t.$t("guidelines_text"))+" ")]),s("div",{staticClass:"mandatory-sec"},[s("div",{staticClass:"mandatory"},[t._v(t._s(t.$t("csv_format_heading")))]),s("div",[t._v(" "+t._s(t.$t("csv_support_upload"))+" "),s("a",{attrs:{href:"https://en.wikipedia.org/wiki/Comma-separated_values",target:"_"}},[t._v("CSV")]),t._v(" "+t._s(t.$t("csv_delimiter"))+" ")])]),s("div",{staticClass:"mandatory-sec"},[s("div",{staticClass:"mandatory"},[t._v(t._s(t.$t("mandatory_heading")))]),s("div",{domProps:{innerHTML:t._s(t.$t("mandatory"))}})]),s("div",{staticClass:"mandatory-sec"},[s("div",{staticClass:"mandatory"},[t._v(t._s(t.$t("optional_heading")))]),s("div",{domProps:{innerHTML:t._s(t.$t("optional"))}})]),s("div",{staticClass:"mandatory-sec"},[s("div",{staticClass:"mandatory"},[t._v(t._s(t.$t("ignored_heading")))]),s("div",[t._v(" "+t._s(t.$t("ignored_text"))+" ")])]),s("div",{staticClass:"mandatory-sec"},[s("div",{staticClass:"mandatory"},[t._v(t._s(t.$t("type_unknown_heading")))]),s("div",[t._v(" "+t._s(t.$t("type_unknown_text"))+" ")])])])},M=[],W={},Y=W,G=(s("52d7"),s("2877")),B=Object(G["a"])(Y,F,M,!1,null,"547b9da8",null),Q=B.exports,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{staticClass:"review-section",attrs:{column:""}},[s("v-flex",[s("v-tabs",{attrs:{"background-color":"transparent",color:"basil",grow:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("v-tab",[t._v(" "+t._s(t.$t("full_file"))+" ")]),s("v-tab",[t._v(" "+t._s(t.$t("selected_columns")))])],1),s("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[s("v-tab-item",[s("v-card",{attrs:{color:"basil",flat:""}},[s("v-simple-table",{staticClass:"top-scrollbars text-one-line",scopedSlots:t._u([{key:"default",fn:function(){return[s("tbody",{staticClass:"top-scrollbars-child"},t._l(t.originalDataArr,(function(e,a){return s("tr",{key:a},t._l(e,(function(e,a){return s("td",{key:a},[t._v(" "+t._s(e)+" ")])})),0)})),0)]},proxy:!0}])})],1)],1),s("v-tab-item",[s("v-card",{attrs:{color:"basil",flat:""}},[t.acceptedHeaders.length?s("v-simple-table",{staticClass:"top-scrollbars",attrs:{id:"selected-columns"},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",t._l(t.acceptedHeaders,(function(e){return s("th",{key:e.header,staticClass:"text-left"},[t._v(" "+t._s(e.header)+" as "+t._s(e.dataType)+" ")])})),0)]),s("tbody",t._l(t.selectedTransactionColumns,(function(e,a){return s("tr",{key:a},t._l(e,(function(e,a){return s("td",{key:a},[t._v(" "+t._s(e)+" ")])})),0)})),0)]},proxy:!0}],null,!1,4166118524)}):s("v-card-text",{staticClass:"review-section-card-text-center"},[t._v(t._s(t.$t("select_columns_from_above")))])],1)],1)],1)],1)],1)},K=[],X={props:{originalDataArr:{type:Array,default:()=>[]},acceptedHeaders:{type:Array,default:()=>[]},selectedTransactionColumns:{type:Array,default:()=>[]}},data(){return{tab:null}}},Z=X,tt=(s("bf17"),Object(G["a"])(Z,J,K,!1,null,null,null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",[s("v-col",{attrs:{cols:"24",sm:"12"}},[s("div",{staticClass:"row-heading"},[t._v(t._s(t.$t("import_to")))])]),s("v-col",{attrs:{cols:"24",sm:"12"}},[s("v-radio-group",{attrs:{row:""},model:{value:t.importTo,callback:function(e){t.importTo=e},expression:"importTo"}},[s("v-radio",{attrs:{value:"institution"},on:{click:t.updateImportTo},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(t.$t("institution"))+" ")]},proxy:!0}])}),s("v-radio",{attrs:{value:"asset"},on:{click:t.updateImportTo},scopedSlots:t._u([{key:"label",fn:function(){return[t._v(" "+t._s(t.$t("asset"))+" ")]},proxy:!0}])})],1)],1)],1)},at=[],nt={data(){return{importTo:"institution"}},methods:{updateImportTo(){this.$emit("updateImportTo",this.importTo)}}},it=nt,rt=Object(G["a"])(it,st,at,!1,null,null,null),ot=rt.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.institutionId?s("div",{staticClass:"institution-outer"},[t.institutions.length?s("span",{staticClass:"institution-inner"},[s("img",{attrs:{src:"https://app.wealthica.com/images/institutions/"+t.getInstitutionType+".png",alt:"Wealthica"}})]):t._e()]):s("div",{staticClass:"institution-outer"},[t._l(t.partInstitutions,(function(t){return s("span",{key:t.id,staticClass:"institution-inner"},[s("img",{attrs:{src:"https://app.wealthica.com/images/institutions/"+t.type+".png",alt:"Wealthica"}})])})),t.institutions.length-t.partInstitutions.length-1>0?s("span",{staticClass:"institution-number"},[t._v(t._s(t.institutions.length-t.partInstitutions.length-1)+"+")]):t._e()],2),s("select",{directives:[{name:"model",rawName:"v-model",value:t.institutionId,expression:"institutionId"}],ref:"institutionId",staticClass:"account-drop-down",class:{"account-drop-down-error":t.$v.institutionId&&t.$v.institutionId.$error},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.institutionId=e.target.multiple?s:s[0]},t.updateInstitutionId]}},[s("option",{attrs:{selected:"",value:""}},[t._v("Select an institution to import to.")]),t._l(t.institutions,(function(e){return s("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.name)+" ")])}))],2),t.institutionId?s("select",{directives:[{name:"model",rawName:"v-model",value:t.investmentId,expression:"investmentId"}],ref:"investmentId",staticClass:"account-drop-down",class:{"account-drop-down-error":t.$v.investmentId&&t.$v.investmentId.$error},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.investmentId=e.target.multiple?s:s[0]},t.updateInvestmentId]}},[s("option",{attrs:{selected:"",value:""}},[t._v("Select an investment to import to.")]),t._l(t.investments,(function(e){return s("option",{key:e._id,domProps:{value:e._id}},[t._v(" "+t._s(e.name)+" ")])}))],2):t._e()])},ct=[],dt={inject:["$v"],data(){return{institutionId:"",investmentId:""}},computed:{...Object(l["c"])(["institutions","assets"]),investments(){return this.institutionId?this.institutions.filter(t=>t.id===this.institutionId)[0].investments:[]},partInstitutions(){return this.institutions.length>=3?this.institutions.slice(0,2):this.institutions},getInstitutionType(){if(!this.institutionId)return this.institutions[0].type;const t=this.institutions.filter(t=>t.id===this.institutionId);return t[0].type}},methods:{updateInstitutionId(){this.$emit("updateInstitutionId",this.institutionId)},updateInvestmentId(){this.$emit("updateInvestmentId",this.investmentId)}}},ut=dt,pt=Object(G["a"])(ut,lt,ct,!1,null,null,null),mt=pt.exports,ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.assetId?s("div",{staticClass:"institution-outer"},[t.assets.length?s("span",{staticClass:"institution-inner"},[t.getAssetIcon(t.selectedAsset)?s("img",{attrs:{src:t.getAssetIcon(t.selectedAsset),alt:"Wealthica"}}):s("i",{staticClass:"wicon",class:t.iconClassName(t.selectedAsset.type)})]):t._e()]):s("div",{staticClass:"institution-outer"},[t._l(t.partAssets,(function(e){return s("span",{key:e._id,staticClass:"institution-inner"},[t.getAssetIcon(e)?s("img",{attrs:{src:t.getAssetIcon(e),alt:"Wealthica"}}):s("i",{staticClass:"wicon",class:t.iconClassName(e.type)})])})),t.assets.length-t.partAssets.length-1>0?s("span",{staticClass:"institution-number"},[t._v(t._s(t.assets.length-t.partAssets.length-1)+"+")]):t._e()],2),s("select",{directives:[{name:"model",rawName:"v-model",value:t.assetId,expression:"assetId"}],ref:"assetId",staticClass:"account-drop-down",class:{"account-drop-down-error":t.$v.assetId&&t.$v.assetId.$error},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.assetId=e.target.multiple?s:s[0]},t.updateAssetId]}},[s("option",{attrs:{selected:"",value:""}},[t._v(t._s(t.$t("select_asset_to_import_to")))]),t._l(t.assets,(function(e){return s("option",{key:e._id,domProps:{value:e._id}},[t._v(" "+t._s(e.name)+" ")])}))],2)])},_t=[],ft={real_estate:{icon:"wicon-property",sub_types:{primary_residence:{default_name:"primary"},secondary_residence:{default_name:"vacation_home"},income_property:{title:"income_or_rental_property",default_name:"income",icon:"wicon-investment"},investment_property:{default_name:"investment",icon:"wicon-investment"},land:{icon:"wicon-location"},other_real_estate:{alt_title:"real_estate",default_name:""}}},private_investment:{icon:"wicon-rocket",sub_types:{private_equity:{default_name:"company_name"},private_fund:{default_name:"fund_name",icon:"wicon-rocket-cash"},vc_fund:{default_name:"fund_name",icon:"wicon-graph"},private_loan:{default_name:"name_of_borrower",icon:"wicon-bag"},insurance:{default_name:"",icon:"wicon-shield"},other_investment:{alt_title:"investment",default_name:"fund_name"}}},other_asset:{title:"other",alt_title:"asset",icon:"wicon-gem"},debt:{sub_types:{mortgage:{icon:"wicon-ccard"},other_debt:{title:"other",alt_title:"liability",icon:"wicon-ccard"}}}},vt={inject:["$v"],data(){return{assetId:""}},computed:{...Object(l["c"])(["assets"]),selectedAsset(){if(this.assetId){const t=this.assets.filter(t=>t._id===this.assetId);return t[0]}return this.assets[0]},partAssets(){return this.assets.length>=3?this.assets.slice(0,2):this.assets}},methods:{updateAssetId(){this.$emit("updateAssetId",this.assetId)},getAssetIcon(t){return t.image||null},iconClassName(t){let e;return Object.entries(ft).forEach(s=>{const[a]=s;a===t?e=ft[a].icon:ft[a].sub_types&&ft[a].sub_types[t]&&(e=ft[a].sub_types[t].icon||ft[a].icon)}),e}}},yt=vt,bt=Object(G["a"])(yt,ht,_t,!1,null,null,null),gt=bt.exports,wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-row",[s("v-col",{attrs:{cols:"24",sm:"12"}},[s("div",{staticClass:"row-heading"},[t._v(" "+t._s(t.$t("upload_csv"))+" ")])]),s("v-col",{attrs:{cols:"24",sm:"12"}},[s("div",{staticClass:"upload-file-wrapper"},[s("div",{staticClass:"upload-file-left"},[s("input",{ref:"file",attrs:{id:"file",type:"file"},on:{change:t.handleFileUpload}})]),t.file&&t.headerDetected?s("div",{staticClass:"upload-file-right"},[s("strong",[t._v("Header detected:")]),t._v(" first line of the file is a list of column names. "),s("br"),s("v-checkbox",{attrs:{label:"Disable headers, first line is not a list column names"},on:{change:t.reProcessFileDisableHeader},model:{value:t.disableHeader,callback:function(e){t.disableHeader=e},expression:"disableHeader"}})],1):t._e(),t.file&&!t.headerDetected?s("div",{staticClass:"upload-file-right"},[s("strong",[t._v("No header detected:")]),t._v(" fist line of the file is NOT a list of column names. "),s("br"),s("v-checkbox",{attrs:{label:"Enable headers, first line is a list column names"},on:{change:t.reProcessFileEnableHeader},model:{value:t.enableHeader,callback:function(e){t.enableHeader=e},expression:"enableHeader"}})],1):t._e(),s("div",{staticStyle:{clear:"both",display:"block",width:"100%"}})])])],1)},Tt=[],jt={props:{headerDetected:{type:Boolean,required:!1,default:()=>!1}},data(){return{disableHeader:!1,enableHeader:!1,file:null}},methods:{handleFileUpload(t){t.preventDefault();const e=t.target.files||t.dataTransfer.files,s=e[0];this.file=s,this.$emit("handleFileUpload",{file:s,disableHeader:this.disableHeader,enableHeader:this.enableHeader})},reProcessFileEnableHeader(){this.disableHeader=!1,this.$emit("handleFileUpload",{file:this.file,disableHeader:this.disableHeader,enableHeader:this.enableHeader})},reProcessFileDisableHeader(){this.enableHeader=!1,this.$emit("handleFileUpload",{file:this.file,disableHeader:this.disableHeader,enableHeader:this.enableHeader})}}},It=jt,Ct=(s("f463"),Object(G["a"])(It,wt,Tt,!1,null,null,null)),$t=Ct.exports,St=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.headersWithDataType.length?s("v-row",[s("v-col",{attrs:{cols:"12",sm:"6"}},[s("div",{ref:"topelement"}),s("label",{staticClass:"as"},[t._v(t._s(t.$t("detected_as")))])]),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("label",{staticClass:"as"},[t._v(t._s(t.$t("imported_as")))])])],1):t._e(),t._l(t.headersWithDataType,(function(e){return s("div",{key:e.header,staticClass:"loop-row"},[s("v-col",{attrs:{cols:"12",sm:"6"}},[s("input",{staticClass:"detected-as-input",attrs:{type:"text",disabled:""},domProps:{value:e.header}})]),s("v-col",{attrs:{cols:"12",sm:"6"}},[s("select",{staticClass:"imported-as-drop-down",class:{ignored:"ignored"===e.dataType},domProps:{value:e.dataType},on:{change:function(s){return s.preventDefault(),t.changeDataType(s,e.header)}}},t._l(t.dataTypes,(function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])})),0)])],1)}))],2)},Dt=[],kt={props:{headersWithDataType:{type:Array,default:()=>[]}},data(){return{dataTypes:[{text:this.$t("date"),value:"date"},{text:this.$t("amount"),value:"currency_amount"},{text:this.$t("depsit_amount"),value:"deposit_amount"},{text:this.$t("withdraw_amount"),value:"withdrawal_amount"},{text:this.$t("type"),value:"type"},{text:this.$t("asset"),value:"asset"},{text:this.$t("category"),value:"category"},{text:this.$t("description"),value:"description"},{text:this.$t("fee"),value:"fee"},{text:this.$t("institution"),value:"institution"},{text:this.$t("investment"),value:"investment"},{text:this.$t("note"),value:"note"},{text:this.$t("quantity"),value:"quantity"},{text:this.$t("gain"),value:"realized_gain"},{text:this.$t("security"),value:"security"},{text:this.$t("settlement_date"),value:"settlement_date"},{text:this.$t("symbol"),value:"symbol"},{text:this.$t("ignored"),value:"ignored"}]}},methods:{async changeDataType(t,e){const s=t.target.value;this.$emit("changeDataType",{dataType:s,header:e})}}},xt=kt,At=(s("b42b"),Object(G["a"])(xt,St,Dt,!1,null,null,null)),Ot=At.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Popup",{staticClass:"error-popup",on:{hide:t.hide},scopedSlots:t._u([{key:"content",fn:function(){return[t.errorMessage.length?s("p",{staticClass:"error-popup__error"},[t._v(" "+t._s(t.errorMessage)+" ")]):t._e(),s("button",{staticClass:"error-popup__button",on:{click:t.hide}},[t._v(" "+t._s(t.$t("close"))+" ")])]},proxy:!0}])})},Pt=[],Rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"popup"},[s("div",{staticClass:"popup__overlay",on:{click:function(e){return t.$emit("hide")}}}),s("div",{staticClass:"popup__wrapper",style:t.topPosition},[s("div",{staticClass:"popup__box"},[s("div",{staticClass:"popup__close",on:{click:function(e){return t.$emit("hide")}}},[s("CrossIcon",{staticClass:"popup__close-svg"})],1),s("div",{staticClass:"popup__title"},[t._t("title")],2),s("div",{staticClass:"popup__content"},[t._t("content")],2)])])])},zt=[],Nt=s("fc4d"),Lt=s.n(Nt),qt={components:{CrossIcon:Lt.a},computed:{...Object(l["c"])(["popupPosition"]),topPosition(){return{top:this.popupPosition+"px"}}}},Ht=qt,Ut=(s("9cef"),Object(G["a"])(Ht,Rt,zt,!1,null,"693b09fc",null)),Vt=Ut.exports,Ft={components:{Popup:Vt},props:{error:{type:Object,required:!1,default:()=>null}},computed:{errorMessage(){return this.error?this.error.data&&this.error.data.message?this.error.data.message:this.error?this.error.toString():"":""},errorStack(){return this.error?this.error.stack:""}},methods:{hide(){this.$store.commit("STORE_ERROR_POPUP_VISIBLE",!1)}}},Mt=Ft,Wt=(s("c1b9"),Object(G["a"])(Mt,Et,Pt,!1,null,null,null)),Yt=Wt.exports,Gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Popup",{staticClass:"error-popup",on:{hide:t.hide},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.$t("failed_transactions_message")))]},proxy:!0},{key:"content",fn:function(){return[t._l(t.failedTransactions,(function(e,a){return s("p",{key:a,staticClass:"error-popup__error"},[t._v(" "+t._s(e.error.message)+" ")])})),t.showGoToSavedTransactions?s("button",{staticClass:"error-popup__button",on:{click:t.hideAndRedirect}},[t._v(" "+t._s(t.$t("go_to_saved_transactions"))+" ")]):t._e()]},proxy:!0}])})},Bt=[],Qt={components:{Popup:Vt},props:{failedTransactions:{type:Array,required:!1,default:()=>[]},redirectURL:{type:String,required:!1,default:()=>null},showGoToSavedTransactions:{type:Boolean,required:!1,default:()=>!1}},methods:{hideAndRedirect(){this.$store.commit("STORE_ERROR_REDIRECT_POPUP_VISIBLE",!1),window.top.location.href=this.redirectURL},hide(){this.$store.commit("STORE_ERROR_REDIRECT_POPUP_VISIBLE",!1)}}},Jt=Qt,Kt=(s("4444"),Object(G["a"])(Jt,Gt,Bt,!1,null,null,null)),Xt=Kt.exports,Zt={name:"UploadForm",provide(){return{$v:this.$v}},components:{Guidelines:Q,DataTable:et,SelectInstitution:mt,SelectType:ot,SelectAsset:gt,Upload:$t,SelectDataType:Ot,ErrorPopup:Yt,ErrorRedirectPopup:Xt},data(){return{importTo:"institution",account:null,institutionId:"",investmentId:"",assetId:"",file:null,headers:[],headersWithDataType:[],dataArr:[],originalDataArr:[],dialog:!1,failedTransactions:[],redirectURL:"#",showGoToSavedTransactions:!1,headerDetected:!1,error:null}},validations:{institutionId:{required:b["required"]},investmentId:{required:b["required"]},assetId:{required:b["required"]}},computed:{...Object(l["c"])(["selectedCurrency","savedTransactions","errorPopupVisible","erorPopupRedirectVisible"]),selectedTransactionColumns(){return this.dataArr.map(t=>{const e={};return Object.entries(t).forEach(t=>{const[s,a]=t;k(this.headersWithDataType,s)||(e[s]=a)}),e})},importData(){return this.selectedTransactionColumns.map(t=>{const e={};return Object.entries(t).forEach(t=>{const[s,a]=t,{dataType:n,newValue:i}=U(this.acceptedHeaders,s,a);"deposit_amount"===n&&i?(e.type="deposit",e.currency_amount=i):("deposit_amount"!==n||i)&&("withdrawal_amount"===n&&i?(e.type="withdrawal",e.currency_amount=i):("withdrawal_amount"!==n||i)&&(e[n]=i))}),"withdrawal"===e.type&&(e.currency_amount=-e.currency_amount),e})},acceptedHeaders(){return this.headersWithDataType.filter(t=>"ignored"!==t.dataType)}},methods:{...Object(l["b"])(["saveTransactions"]),async handleFileUpload(t){const e=await L(t.file),{originalDataArr:s,headerDetected:a}=z(e,t.disableHeader,t.enableHeader);this.headerDetected=a,this.originalDataArr=s,this.dataArr=N(e,t.disableHeader,t.enableHeader);const n=this.dataArr[0],i=[];Object.entries(n).forEach(([t,e])=>{const s=H(t,e);i.push(s)}),this.headersWithDataType=i},async changeDataType({dataType:t,header:e}){this.headersWithDataType=this.headersWithDataType.map(s=>s.header===e?{header:e,dataType:t}:{...s})},async validateInput(){if(this.$v.$touch(),this.$v.$invalid)if("institution"===this.importTo){if(this.$v.institutionId.$error){const t=this.$refs.selectInstitution.$refs.institutionId;return t.scrollIntoView({behavior:"smooth"}),!1}if(this.$v.investmentId.$error){const t=this.$refs.selectInstitution.$refs.investmentId;return t.scrollIntoView({behavior:"smooth"}),!1}}else if(this.$v.assetId.$error){const t=this.$refs.selectAsset.$refs.assetId;return t.scrollIntoView({behavior:"smooth"}),!1}return!0},async showErrorPopup(t){this.error=t,this.$store.commit("STORE_ERROR_POPUP_VISIBLE",!0)},async showErrorRedirectPopup(){this.$store.commit("STORE_ERROR_REDIRECT_POPUP_VISIBLE",!0)},async uploadCSV(){const t=await this.validateInput();if(!t)return;const e=this.$refs.selectDataType.$refs.topelement;e.scrollIntoView({behavior:"smooth"});const s=V(this.acceptedHeaders,this.$t);if(!s.valid)return void await this.showErrorPopup({data:{message:s.message}});this.dialog=!0;const a={importTo:this.importTo,institutionId:this.institutionId,investmentId:this.investmentId,assetId:this.assetId,importData:this.importData};if(await this.saveTransactions(a),this.savedTransactions&&this.savedTransactions.length){this.failedTransactions=this.savedTransactions.filter(t=>t.error),this.savedTransactions.length!==this.failedTransactions.length&&(this.showGoToSavedTransactions=!0);let t="";t="institution"===this.importTo?"institutions="+this.institutionId:"assets="+this.assetId,this.redirectURL=`https://app.wealthica.com/transactions?peek=true&${t}&from=${E(this.importData)}&to=${P(this.importData)}`,this.dialog=!1,this.failedTransactions.length?await this.showErrorRedirectPopup():setTimeout(()=>{window.top.location.href=this.redirectURL},200)}},goToSavedTransactions(){window.top.location.href=this.redirectURL},updateImportTo(t){this.importTo=t},updateInstitutionId(t){this.institutionId=t},updateInvestmentId(t){this.investmentId=t},updateAssetId(t){this.assetId=t}}},te=Zt,ee=(s("bf99"),Object(G["a"])(te,v,y,!1,null,null,null)),se=ee.exports,ae={name:"App",components:{Loading:f.a,UploadForm:se},data:()=>({profileId:null}),computed:{...Object(l["c"])(["loading"]),appStyle(){return""}}},ne=ae,ie=(s("5c0b"),Object(G["a"])(ne,m,h,!1,null,null,null)),re=ie.exports,oe=s("2a5e"),le=s("1419"),ce=s.n(le),de={state:{addon:null,options:{},institutions:null,assets:null,loading:!0,selectedCurrency:null,savedTransactions:[]},getters:{addon:t=>t.addon,addonOptions:({options:t})=>t||{},institutions:t=>t.institutions,assets:t=>t.assets,language:()=>"en",loading:t=>t.loading,selectedCurrency:t=>t.selectedCurrency,savedTransactions:t=>t.savedTransactions},mutations:{SET_ADDON(t,e){t.addon=e},SET_OPTIONS(t,e){t.options=e},SET_LOADING(t,e){t.loading=e},STORE_INSTITUTIONS(t,e){t.institutions=e},STORE_ASSETS(t,e){t.assets=e},SET_SELECTED_CURRENCY(t,e){t.selectedCurrency=e},SET_SAVED_TRANSACTIONS(t,e){t.savedTransactions=e}},actions:{initAddon({commit:t,dispatch:e}){const s={},a=new oe["Addon"](s);t("SET_ADDON",a),a.on("init",t=>e("updateData",t)).on("update",t=>e("updateData",t))},async updateData({getters:t,commit:e,dispatch:s},a){const n={groups:t.addonOptions.groupsFilter,institutions:t.addonOptions.institutionsFilter,investments:t.addonOptions.investmentsFilter};e("SET_OPTIONS",a);const i={groups:t.addonOptions.groupsFilter,institutions:t.addonOptions.institutionsFilter,investments:t.addonOptions.investmentsFilter};ce()(n,i)||(e("SET_LOADING",!0),await s("fetchInstitutionsAndAssets"),await s("fetchCurrencies"),e("SET_LOADING",!1))},async fetchInstitutionsAndAssets({commit:t,getters:e}){const{addon:s}=e,a=await s.api.getInstitutions(),n=await s.api.getAssets();t("STORE_INSTITUTIONS",a),t("STORE_ASSETS",n)},async fetchCurrencies({commit:t,getters:e}){const{addon:s}=e,a=await s.api.getCurrencies(),n=a.find(t=>t.preferred);t("SET_SELECTED_CURRENCY",n)},async saveTransactions({commit:t,dispatch:e},s){const{importTo:a}=s;let n={};n="institution"===a?{institution:s.institutionId,investment:s.investmentId}:{asset:s.assetId};const{importData:i}=s,r=await Promise.all(i.map(async t=>{const s={...t,...n};return e("saveTransaction",s)}));t("SET_SAVED_TRANSACTIONS",r)},async saveTransaction({getters:t},e){const{addon:s}=t;return new Promise(t=>{const a={method:"POST",endpoint:"transactions",body:e};s.request(a).then(e=>{t({error:null,response:e})}).catch(s=>{s&&s.data&&s.data._message?t({error:{message:s.data._message},response:null}):t({error:{transaction:e,message:"Unknown Error"},response:null})})})}}};a["default"].use(l["a"]);var ue=new l["a"].Store({state:{errorPopupVisible:!1,erorPopupRedirectVisible:!1,popupPosition:650},getters:{errorPopupVisible:t=>t.errorPopupVisible,erorPopupRedirectVisible:t=>t.erorPopupRedirectVisible,popupPosition:t=>t.popupPosition},mutations:{STORE_ERROR_POPUP_VISIBLE(t,e){t.errorPopupVisible=e},STORE_ERROR_REDIRECT_POPUP_VISIBLE(t,e){t.erorPopupRedirectVisible=e}},modules:{addon:de}}),pe=s("ce5b"),me=s.n(pe);s("bf40");const he={primary:"#a04bda",secondary:"#f59e2c"};a["default"].use(me.a);var _e=new me.a({theme:{themes:{dark:he,light:he}}}),fe=s("ce04"),ve=s.n(fe);a["default"].use(ve.a);s("b27c"),s("a44f");a["default"].config.productionTip=!1,a["default"].use(i.a),a["default"].use(c["a"],{defaultLanguage:"en",languagesAvailable:["en","fr"]}),a["default"].locales(p),new a["default"]({store:ue,computed:{...Object(l["c"])(["language"])},watch:{language(t){this.$polyglot.setLang({lang:t}),o.a.locale("fr"===t?"fr-ca":t)}},created(){this.initAddon()},methods:{...Object(l["b"])(["initAddon"])},vuetify:_e,render:t=>t(re)}).$mount("#app")},"57f3":function(t,e,s){},"5c0b":function(t,e,s){"use strict";s("4fff")},"7d1c":function(t,e,s){},9518:function(t,e,s){},"982c":function(t,e,s){var a=s("c8ef").default,n=s("4624").default,i=["class","staticClass","style","staticStyle","attrs"];s("862d"),t.exports={functional:!0,render:function(t,e){var s=e._c,r=(e._v,e.data),o=e.children,l=void 0===o?[]:o,c=r.class,d=r.staticClass,u=r.style,p=r.staticStyle,m=r.attrs,h=void 0===m?{}:m,_=n(r,i);return s("svg",a({class:[c,d],style:[u,p],attrs:Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"54",height:"54",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([s("circle",{attrs:{cx:"50",cy:"50",fill:"none",stroke:"#7f3eab","stroke-width":"10",r:"29","stroke-dasharray":"136.659280431156 47.553093477052"}},[s("animateTransform",{attrs:{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;360 50 50",keyTimes:"0;1"}})])]))}}},"9cef":function(t,e,s){"use strict";s("f42e")},b27c:function(t,e,s){},b42b:function(t,e,s){"use strict";s("185b")},bf17:function(t,e,s){"use strict";s("5403")},bf99:function(t,e,s){"use strict";s("2104")},c1b9:function(t,e,s){"use strict";s("ccea")},ccea:function(t,e,s){},f42e:function(t,e,s){},f463:function(t,e,s){"use strict";s("9518")},fc4d:function(t,e,s){var a=s("c8ef").default,n=s("4624").default,i=["class","staticClass","style","staticStyle","attrs"];s("862d"),t.exports={functional:!0,render:function(t,e){var s=e._c,r=(e._v,e.data),o=e.children,l=void 0===o?[]:o,c=r.class,d=r.staticClass,u=r.style,p=r.staticStyle,m=r.attrs,h=void 0===m?{}:m,_=n(r,i);return s("svg",a({class:[c,d],style:[u,p],attrs:Object.assign({viewBox:"0 0 10 10",xmlns:"http://www.w3.org/2000/svg"},h)},_),l.concat([s("path",{attrs:{fill:"currentColor",d:"M9.742.354a.88.88 0 010 1.245L6.342 5l3.4 3.4a.88.88 0 010 1.246l-.096.096a.88.88 0 01-1.245 0L5 6.342l-3.4 3.4a.88.88 0 01-1.246 0l-.096-.096a.88.88 0 010-1.245L3.658 5l-3.4-3.4a.88.88 0 010-1.246L.354.258a.88.88 0 011.245 0L5 3.658l3.4-3.4a.88.88 0 011.246 0l.096.096z"}})]))}}},ff97:function(t,e){const s=[{name:"date",type:"date-time",matching_words:["date","transaction date"]},{name:"currency_amount",type:"number",matching_words:["Amount","Currency Amount","Total"]},{name:"deposit_amount",type:"number",matching_words:["Amount","Currency Amount","Total"]},{name:"withdrawal_amount",type:"number",matching_words:["Amount","Currency Amount","Total"]},{name:"type",type:"string",matching_words:["Type","Activity"]},{name:"asset",type:"String",matching_words:["asset"]},{name:"category",type:"string",matching_words:["category"]},{name:"description",type:"string",matching_words:["description"]},{name:"fee",type:"number",matching_words:["fee"]},{name:"institution",type:"string",matching_words:["institution"]},{name:"investment",type:"string",matching_words:["investment"]},{name:"note",type:"string",matching_words:["note"]},{name:"quantity",type:"number",matching_words:["quantity"]},{name:"realized_gain",type:"number",matching_words:["realized_gain","gain"]},{name:"security",type:"string",matching_words:["security"]},{name:"settlement_date",type:"date-time",matching_words:["Settlement Date"]},{name:"symbol",type:"string",matching_words:["symbol"]}];t.exports={dataTypes:s}}});
//# sourceMappingURL=app.5ca5b91d.js.map